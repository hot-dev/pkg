::mcp::types ns
meta {doc: "Type definitions for the Model Context Protocol (MCP)."}

// ============================================================================
// Session
// ============================================================================

ClientInfo
meta {doc: "Client identification sent during the initialize handshake."}
type {
  name: Str,
  version: Str
}

ServerInfo
meta {doc: "Server identification received during the initialize handshake."}
type {
  name: Str,
  version: Str
}

ClientCapabilities
meta {doc: "Optional capabilities the client advertises during initialization.

- `roots` - Filesystem root listing support
- `sampling` - LLM sampling request support"}
type {
  roots: Map?,
  sampling: Map?
}

ServerCapabilities
meta {doc: "Capabilities the server advertises during initialization.

- `tools` - Server provides callable tools
- `resources` - Server provides readable resources
- `prompts` - Server provides prompt templates
- `logging` - Server supports structured log messages
- `completions` - Server supports argument auto-completion"}
type {
  tools: Map?,
  resources: Map?,
  prompts: Map?,
  logging: Map?,
  completions: Map?
}

Session
meta {doc: "An active MCP session. Created by `::mcp::client/initialize` and passed to all subsequent operations.

- `url` - The MCP server endpoint
- `session-id` - Server-assigned session ID (if any)
- `protocol-version` - Negotiated protocol version
- `server-info` - Server name and version
- `server-capabilities` - What the server supports
- `headers` - Pre-built headers for subsequent requests"}
type {
  url: Str,
  session-id: Str?,
  protocol-version: Str,
  server-info: ServerInfo,
  server-capabilities: ServerCapabilities,
  headers: Map
}

// ============================================================================
// Tools
// ============================================================================

Tool
meta {doc: "A tool available on the MCP server.

- `name` - Unique tool identifier
- `title` - Human-readable display name
- `description` - What the tool does
- `input-schema` - JSON Schema for the tool's arguments"}
type {
  name: Str,
  title: Str?,
  description: Str?,
  input-schema: Map?
}

ToolContent
meta {doc: "A single content item in a tool call result.

- `type` - Content type: \"text\", \"image\", \"resource\", or \"resource_link\"
- `text` - Text content (when type is \"text\")
- `data` - Base64-encoded data (when type is \"image\")
- `mime-type` - MIME type of the content
- `resource` - Embedded resource (when type is \"resource\")"}
type {
  type: Str,
  text: Str?,
  data: Str?,
  mime-type: Str?,
  resource: Map?
}

ToolResult
meta {doc: "Result from calling a tool on the MCP server.

- `content` - Array of content items (text, images, resources)
- `is-error` - Whether the tool execution resulted in an error
- `structured-content` - Optional structured output matching the tool's output schema"}
type {
  content: Vec<ToolContent>,
  is-error: Bool?,
  structured-content: Any?
}

// ============================================================================
// Resources
// ============================================================================

Resource
meta {doc: "A resource available on the MCP server.

- `uri` - Unique resource URI
- `name` - Human-readable name
- `description` - What the resource contains
- `mime-type` - MIME type of the resource content"}
type {
  uri: Str,
  name: Str,
  description: Str?,
  mime-type: Str?
}

ResourceTemplate
meta {doc: "A URI template for parameterized resources.

- `uri-template` - RFC 6570 URI template
- `name` - Human-readable name
- `description` - What the template produces
- `mime-type` - MIME type of the resulting resource"}
type {
  uri-template: Str,
  name: Str,
  description: Str?,
  mime-type: Str?
}

ResourceContent
meta {doc: "Content returned from reading a resource.

- `uri` - The resource URI
- `text` - Text content (for text resources)
- `blob` - Base64-encoded content (for binary resources)
- `mime-type` - MIME type of the content"}
type {
  uri: Str,
  text: Str?,
  blob: Str?,
  mime-type: Str?
}

// ============================================================================
// Prompts
// ============================================================================

Prompt
meta {doc: "A prompt template available on the MCP server.

- `name` - Unique prompt identifier
- `title` - Human-readable display name
- `description` - What the prompt does
- `arguments` - List of argument definitions (each with name, description, required)"}
type {
  name: Str,
  title: Str?,
  description: Str?,
  arguments: Vec<Map>?
}

PromptMessage
meta {doc: "A message in a prompt response.

- `role` - Message role: \"user\" or \"assistant\"
- `content` - Message content (type + text/image/resource)"}
type {
  role: Str,
  content: Map
}

// ============================================================================
// Streaming
// ============================================================================

StreamEvent
meta {doc: "A parsed SSE event from a streaming MCP response.

- `event` - SSE event type (typically \"message\")
- `data` - Parsed JSON-RPC message (notification, response, etc.)
- `id` - SSE event ID (for resumability)"}
type {
  event: Str?,
  data: Any?,
  id: Str?
}
